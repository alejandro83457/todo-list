(()=>{"use strict";class t{#t=[];addTodo(t){this.#t.push(t)}get inbox(){return this.#t}removeTodo(t){let e;for(let o=0;o<this.#t.length;o++)this.#t[o].title==t&&(e=o);this.#t.splice(e,1)}stringify(){let t=[];for(let e of this.#t)t.push(e.getTodo());return JSON.stringify(t)}showInbox(){for(let t of this.#t)t.showTodo()}}class e{#e;#o;#i;#r;constructor(t,e,o,i){this.#e=t,this.#o=e,this.#i=o,this.#r=i}get title(){return this.#e}get description(){return this.#o}get due(){return this.#i}get priority(){return this.#r}getTodo(){return{title:this.#e,description:this.#o,due:this.#i,priority:this.#r}}showTodo(){console.log(`\t${this.#e} ${this.#o} ${this.#i} ${this.#r}`)}}class o{#e;#o;constructor(t,e){this.#e=t,this.#o=e}get title(){return this.#e}get description(){return this.#o}getTodo(){return{title:this.#e,description:this.#o}}showTodo(){console.log(`${this.#e} ${this.#o}`)}}class i{#n=[];get projects(){return this.#n}addProject(t){this.#n.push(t)}removeProject(t){let e;for(let o=0;o<this.#n.length;o++)this.#n[o].title==t&&(e=o);this.#n.splice(e,1)}stringify(){let t=[];for(let e of this.#n)t.push(e.stringify());return JSON.stringify(t)}showProjects(){for(let t of this.#n)t.showProject()}}class r{#l={};constructor(t){this.#l.title=t,this.#l.todos=[]}get projectTitle(){return this.#l.title}get project(){return this.#l}stringify(){let t={};t.title=this.#l.title,t.todos=[];for(let e of this.#l.todos)t.todos.push(e.getTodo());return t}addTodo(t){this.#l.todos.push(t)}showProject(){console.log(this.#l.title);for(let t of this.#l.todos)t.showTodo()}}function n(t){localStorage.inbox=t.stringify()}function l(){let t=document.querySelector("#list");for(;t.childNodes.length>0;)t.removeChild(t.firstChild);document.querySelector("#inbox-form")?document.querySelector("#inbox-form").remove():document.querySelector("#project-form")&&document.querySelector("#project-form").remove()}function d(){let t=document.querySelector("#projects-list");for(;t.childNodes.length>0;)t.removeChild(t.firstChild)}function c(t){let e=document.querySelector("#list"),o=t.project.todos;for(let t of o){let o=document.createElement("li");o.setAttribute("data",t.title);let i=document.createElement("div");i.textContent=`${t.title} ${t.description} ${t.due} ${t.priority}`,o.appendChild(i),e.appendChild(o)}}function u(t,e){for(let o of t.projects){let i=document.createElement("li");i.addEventListener("click",(()=>{document.querySelector("#inbox-form")&&document.querySelector("#inbox-form").remove(),l(),c(o),p(o,t)}));let r=document.createElement("div");r.textContent=`${o.projectTitle}`,i.appendChild(r),e.appendChild(i)}}function s(t){let e=document.createElement("input");return e.setAttribute("type","checkbox"),e.addEventListener("change",(e=>{t.removeTodo(e.target.parentElement.getAttribute("data")),function(t){t.target.parentElement.remove()}(e),n(t)})),e}function p(t,o){let i=document.querySelector("#list"),r=document.createElement("div");r.setAttribute("id","project-form");let n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("id","title"),n.setAttribute("placeholder","Title");let l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","description"),l.setAttribute("placeholder","Description");let d=new Date,c=`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}-${d.getDate().toString().padStart(2,"0")}`,u=document.createElement("input");u.setAttribute("id","due"),u.setAttribute("type","date"),u.setAttribute("value",c);let s=document.createElement("select");s.setAttribute("id","priority");let p=["low","medium","high"];for(let t of p){let e=document.createElement("option");e.setAttribute("value",t),e.textContent=t,s.appendChild(e)}let a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("id","add-todo-button"),a.textContent="Add",a.addEventListener("click",(()=>{(function(t,o,i){let r=document.querySelector("#title"),n=document.querySelector("#description"),l=document.querySelector("#due"),d=document.querySelector("#priority"),c=document.createElement("li");c.setAttribute("data",r.value);let u=document.createElement("div");u.textContent=`${r.value} ${n.value} ${l.value} ${d.value}`,c.appendChild(u),i.appendChild(c);let s=new e(r.value,n.value,l.value,d.value);t.addTodo(s),function(t){localStorage.projects=t.stringify()}(o)})(t,o,i),document.querySelector("#title").value="",document.querySelector("#description").value="",document.querySelector("#due").value=c})),r.appendChild(n),r.appendChild(l),r.appendChild(u),r.appendChild(s),r.appendChild(a),i.parentNode.appendChild(r)}let a,h;document.querySelector("#inbox").addEventListener("click",(()=>{let t=document.querySelector("#list");l(),function(t,e){for(let o of t.inbox){let i=document.createElement("li");i.setAttribute("data",o.title);let r=document.createElement("div");r.textContent=`${o.title} ${o.description}`;let n=s(t);i.appendChild(n),i.appendChild(r),e.appendChild(i)}}(a,t),function(t,e){let i=document.createElement("div");i.setAttribute("id","inbox-form");let r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("id","title"),r.setAttribute("placeholder","Title");let l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","description"),l.setAttribute("placeholder","Description");let d=document.createElement("button");d.setAttribute("type","button"),d.setAttribute("id","add-todo-button"),d.textContent="Add",d.addEventListener("click",(()=>{!function(t,e){let i=document.querySelector("#title"),r=document.querySelector("#description"),l=document.createElement("li");l.setAttribute("data",i.value);let d=document.createElement("div");d.textContent=`${i.value} ${r.value}`;let c=s(t);l.appendChild(c),l.appendChild(d),e.appendChild(l);let u=new o(i.value,r.value);t.addTodo(u),n(t)}(t,e),document.querySelector("#title").value="",document.querySelector("#description").value=""})),i.appendChild(r),i.appendChild(l),i.appendChild(d),e.parentNode.appendChild(i)}(a,t)})),document.querySelector("#projects").addEventListener("click",(()=>{let t=document.querySelector("#projects-list");t.childNodes.length>0?d():(d(),u(h,t)),h.showProjects()})),document.querySelector("#add-project").addEventListener("click",(()=>{let t=document.querySelector("#projects-list");d(),u(h,t),function(t,e){let o=document.createElement("div"),i=document.createElement("input"),n=document.createElement("div");o.setAttribute("id","project-name-container"),i.setAttribute("type","text"),i.setAttribute("id","project-name"),i.setAttribute("placeholder","Project name"),n.setAttribute("id","add-project-button"),n.textContent="Add",n.addEventListener("click",(()=>{t.addProject(new r(i.value)),d(),u(t,e)})),o.appendChild(i),o.appendChild(n),e.appendChild(o)}(h,t)})),function(){if(0==localStorage.length){console.log("Empty. Loading content...");let t=[],e=[];localStorage.setItem("inbox",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(e))}else console.log("Content found.")}(),a=function(){let e=localStorage.getItem("inbox");e=JSON.parse(e);let i=new t;for(let t of e){let e=t.title,r=t.description,n=new o(e,r);i.addTodo(n)}return i}(),h=function(){let t=localStorage.getItem("projects");t=JSON.parse(t);let o=new i;for(let i of t){let t=i.title,n=i.todos,l=new r(t);for(let t of n){let o=t.title,i=t.description,r=t.due,n=t.priority,d=new e(o,i,r,n);l.addTodo(d)}o.addProject(l)}return o}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS0YsVUFBVVAsSUFDN0M4QixhQUFhd0QsUUFBUSxXQUFZN0UsS0FBS0YsVUFBVWMsR0FDbEQsTUFBT0osUUFBUUMsSUFBSSxpQkFDckIsQ0crREFxRSxHQUNBdkYsRUg3RE8sV0FDTCxJQUFJd0YsRUFBaUIxRCxhQUFhMkQsUUFBUSxTQUMxQ0QsRUFBaUIvRSxLQUFLaUYsTUFBTUYsR0FDNUIsSUFBSXhGLEVBQVEsSUFBSUwsRUFDaEIsSUFBSyxJQUFJZ0csS0FBaUJILEVBQWdCLENBQ3hDLElBQUl0RixFQUFReUYsRUFBY3pGLE1BQ3RCWSxFQUFjNkUsRUFBYzdFLFlBQzVCakIsRUFBTyxJQUFJc0IsRUFBV2pCLEVBQU9ZLEdBQ2pDZCxFQUFNSixRQUFRQyxFQUNoQixDQUNBLE9BQU9HLENBQ1QsQ0drRFE0RixHQUdSdkUsRUhsRE8sV0FDTCxJQUFJd0UsRUFBb0IvRCxhQUFhMkQsUUFBUSxZQUM3Q0ksRUFBb0JwRixLQUFLaUYsTUFBTUcsR0FDL0IsSUFBSXhFLEVBQVcsSUFBSUQsRUFDbkIsSUFBSyxJQUFJMEUsS0FBb0JELEVBQW1CLENBQzlDLElBQUkzRixFQUFRNEYsRUFBd0IsTUFDaENyRCxFQUFRcUQsRUFBd0IsTUFDaEN2RSxFQUFVLElBQUlJLEVBQVF6QixHQUMxQixJQUFLLElBQUlMLEtBQVE0QyxFQUFPLENBQ3RCLElBQUlzRCxFQUFZbEcsRUFBWSxNQUN4Qm1HLEVBQWtCbkcsRUFBa0IsWUFDcENvRyxFQUFVcEcsRUFBVSxJQUNwQnFHLEVBQWVyRyxFQUFlLFNBQzlCc0csRUFBYyxJQUFJdkYsRUFDcEJtRixFQUNBQyxFQUNBQyxFQUNBQyxHQUVGM0UsRUFBUTNCLFFBQVF1RyxFQUNsQixDQUNBOUUsRUFBU0MsV0FBV0MsRUFDdEIsQ0FDQSxPQUFPRixDQUNULENHMEJXK0UsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmJveC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaGVscGVyRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9mb3JtLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBJbmJveCB7XG4gICNpbmJveCA9IFtdO1xuXG4gIGFkZFRvZG8odG9kbykge1xuICAgIHRoaXMuI2luYm94LnB1c2godG9kbyk7XG4gIH1cblxuICBnZXQgaW5ib3goKSB7XG4gICAgcmV0dXJuIHRoaXMuI2luYm94O1xuICB9XG5cbiAgcmVtb3ZlVG9kbyh0aXRsZSkge1xuICAgIGxldCBpbmRleDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuI2luYm94Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy4jaW5ib3hbaV0udGl0bGUgPT0gdGl0bGUpIGluZGV4ID0gaTtcbiAgICB9XG4gICAgdGhpcy4jaW5ib3guc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIHN0cmluZ2lmeSgpIHtcbiAgICBsZXQgaW5ib3ggPSBbXTtcbiAgICBmb3IgKGxldCB0b2RvIG9mIHRoaXMuI2luYm94KSB7XG4gICAgICBpbmJveC5wdXNoKHRvZG8uZ2V0VG9kbygpKTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGluYm94KTtcbiAgfVxuXG4gIHNob3dJbmJveCgpIHtcbiAgICBmb3IgKGxldCB0b2RvIG9mIHRoaXMuI2luYm94KSB7XG4gICAgICB0b2RvLnNob3dUb2RvKCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IEluYm94IH07XG4iLCIvLyBVc2VkIGZvciBwcm9qZWN0c1xuY2xhc3MgVG9kbyB7XG4gICN0aXRsZTtcbiAgI2Rlc2NyaXB0aW9uO1xuICAjZHVlO1xuICAjcHJpb3JpdHk7XG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlLCBwcmlvcml0eSkge1xuICAgIHRoaXMuI3RpdGxlID0gdGl0bGU7XG4gICAgdGhpcy4jZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLiNkdWUgPSBkdWU7XG4gICAgdGhpcy4jcHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgfVxuICBnZXQgdGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3RpdGxlO1xuICB9XG4gIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4jZGVzY3JpcHRpb247XG4gIH1cbiAgZ2V0IGR1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jZHVlO1xuICB9XG4gIGdldCBwcmlvcml0eSgpIHtcbiAgICByZXR1cm4gdGhpcy4jcHJpb3JpdHk7XG4gIH1cbiAgZ2V0VG9kbygpIHtcbiAgICBsZXQgdGl0bGUgPSB0aGlzLiN0aXRsZTtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSB0aGlzLiNkZXNjcmlwdGlvbjtcbiAgICBsZXQgZHVlID0gdGhpcy4jZHVlO1xuICAgIGxldCBwcmlvcml0eSA9IHRoaXMuI3ByaW9yaXR5O1xuICAgIHJldHVybiB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlLCBwcmlvcml0eSB9O1xuICB9XG4gIHNob3dUb2RvKCkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFxcdCR7dGhpcy4jdGl0bGV9ICR7dGhpcy4jZGVzY3JpcHRpb259ICR7dGhpcy4jZHVlfSAke3RoaXMuI3ByaW9yaXR5fWBcbiAgICApO1xuICB9XG59XG5cbi8vIFVzZWQgZm9yIGluYm94IG9ubHlcbmNsYXNzIFNpbXBsZVRvZG8ge1xuICAjdGl0bGU7XG4gICNkZXNjcmlwdGlvbjtcbiAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy4jdGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLiNkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICB9XG4gIGdldCB0aXRsZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jdGl0bGU7XG4gIH1cbiAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiNkZXNjcmlwdGlvbjtcbiAgfVxuICBnZXRUb2RvKCkge1xuICAgIGxldCB0aXRsZSA9IHRoaXMuI3RpdGxlO1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IHRoaXMuI2Rlc2NyaXB0aW9uO1xuICAgIHJldHVybiB7IHRpdGxlLCBkZXNjcmlwdGlvbiB9O1xuICB9XG4gIHNob3dUb2RvKCkge1xuICAgIGNvbnNvbGUubG9nKGAke3RoaXMuI3RpdGxlfSAke3RoaXMuI2Rlc2NyaXB0aW9ufWApO1xuICB9XG59XG5cbmV4cG9ydCB7IFRvZG8sIFNpbXBsZVRvZG8gfTtcbiIsImV4cG9ydCBjbGFzcyBQcm9qZWN0cyB7XG4gICNwcm9qZWN0cyA9IFtdO1xuXG4gIGdldCBwcm9qZWN0cygpIHtcbiAgICByZXR1cm4gdGhpcy4jcHJvamVjdHM7XG4gIH1cblxuICBhZGRQcm9qZWN0KHByb2plY3QpIHtcbiAgICB0aGlzLiNwcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuICB9XG5cbiAgcmVtb3ZlUHJvamVjdCh0aXRsZSkge1xuICAgIGxldCBpbmRleDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuI3Byb2plY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy4jcHJvamVjdHNbaV0udGl0bGUgPT0gdGl0bGUpIGluZGV4ID0gaTtcbiAgICB9XG4gICAgdGhpcy4jcHJvamVjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIHN0cmluZ2lmeSgpIHtcbiAgICBsZXQgcHJvamVjdHMgPSBbXTtcbiAgICBmb3IgKGxldCBwcm9qZWN0IG9mIHRoaXMuI3Byb2plY3RzKSB7XG4gICAgICBwcm9qZWN0cy5wdXNoKHByb2plY3Quc3RyaW5naWZ5KCkpO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpO1xuICB9XG5cbiAgc2hvd1Byb2plY3RzKCkge1xuICAgIGZvciAobGV0IHByb2plY3Qgb2YgdGhpcy4jcHJvamVjdHMpIHtcbiAgICAgIHByb2plY3Quc2hvd1Byb2plY3QoKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xuICAjcHJvamVjdCA9IHt9O1xuICBjb25zdHJ1Y3Rvcih0aXRsZSkge1xuICAgIHRoaXMuI3Byb2plY3RbXCJ0aXRsZVwiXSA9IHRpdGxlO1xuICAgIHRoaXMuI3Byb2plY3RbXCJ0b2Rvc1wiXSA9IFtdO1xuICB9XG4gIGdldCBwcm9qZWN0VGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3Byb2plY3RbXCJ0aXRsZVwiXTtcbiAgfVxuICBnZXQgcHJvamVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy4jcHJvamVjdDtcbiAgfVxuICBzdHJpbmdpZnkoKSB7XG4gICAgbGV0IHByb2plY3QgPSB7fTtcbiAgICBwcm9qZWN0W1widGl0bGVcIl0gPSB0aGlzLiNwcm9qZWN0W1widGl0bGVcIl07XG4gICAgcHJvamVjdFtcInRvZG9zXCJdID0gW107XG4gICAgZm9yIChsZXQgdG9kbyBvZiB0aGlzLiNwcm9qZWN0W1widG9kb3NcIl0pIHtcbiAgICAgIHByb2plY3RbXCJ0b2Rvc1wiXS5wdXNoKHRvZG8uZ2V0VG9kbygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb2plY3Q7XG4gIH1cbiAgYWRkVG9kbyh0b2RvKSB7XG4gICAgdGhpcy4jcHJvamVjdFtcInRvZG9zXCJdLnB1c2godG9kbyk7XG4gIH1cbiAgc2hvd1Byb2plY3QoKSB7XG4gICAgY29uc29sZS5sb2codGhpcy4jcHJvamVjdFtcInRpdGxlXCJdKTtcbiAgICBmb3IgKGxldCB0b2RvIG9mIHRoaXMuI3Byb2plY3RbXCJ0b2Rvc1wiXSkge1xuICAgICAgdG9kby5zaG93VG9kbygpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5ib3ggfSBmcm9tIFwiLi9pbmJveFwiO1xuaW1wb3J0IHsgU2ltcGxlVG9kbywgVG9kbyB9IGZyb20gXCIuL3RvZG9cIjtcbmltcG9ydCB7IFByb2plY3RzLCBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdFwiO1xuXG4vLyBDaGVjayBpZiBsb2NhbFN0b3JhZ2UgaXMgc2V0IHVwIHByb3Blcmx5LlxuLy8gSWYgd2lsbCBvbmx5IHJ1biBvbmNlIHBlciBkZXZpY2UuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tTdG9yYWdlKCkge1xuICBpZiAobG9jYWxTdG9yYWdlLmxlbmd0aCA9PSAwKSB7XG4gICAgY29uc29sZS5sb2coXCJFbXB0eS4gTG9hZGluZyBjb250ZW50Li4uXCIpO1xuICAgIGxldCBpbmJveCA9IFtdO1xuICAgIGxldCBwcm9qZWN0cyA9IFtdO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiaW5ib3hcIiwgSlNPTi5zdHJpbmdpZnkoaW5ib3gpKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XG4gIH0gZWxzZSBjb25zb2xlLmxvZyhcIkNvbnRlbnQgZm91bmQuXCIpO1xufVxuXG4vLyBMb2FkcyBpbmJveCBkYXRhIGZyb20gbG9jYWwgc3RvcmFnZS5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkSW5ib3hGcm9tU3RvcmFnZSgpIHtcbiAgbGV0IGluYm94RnJvbUxvY2FsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJpbmJveFwiKTtcbiAgaW5ib3hGcm9tTG9jYWwgPSBKU09OLnBhcnNlKGluYm94RnJvbUxvY2FsKTtcbiAgbGV0IGluYm94ID0gbmV3IEluYm94KCk7XG4gIGZvciAobGV0IHRvZG9Gcm9tTG9jYWwgb2YgaW5ib3hGcm9tTG9jYWwpIHtcbiAgICBsZXQgdGl0bGUgPSB0b2RvRnJvbUxvY2FsLnRpdGxlO1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IHRvZG9Gcm9tTG9jYWwuZGVzY3JpcHRpb247XG4gICAgbGV0IHRvZG8gPSBuZXcgU2ltcGxlVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24pO1xuICAgIGluYm94LmFkZFRvZG8odG9kbyk7XG4gIH1cbiAgcmV0dXJuIGluYm94O1xufVxuXG4vLyBMb2FkcyBwcm9qZWN0cyBmcm9tIGxvY2FsIHN0b3JhZ2VcbmV4cG9ydCBmdW5jdGlvbiBsb2FkUHJvamVjdHNGcm9tU3RvcmFnZSgpIHtcbiAgbGV0IHByb2plY3RzRnJvbUxvY2FsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0c1wiKTtcbiAgcHJvamVjdHNGcm9tTG9jYWwgPSBKU09OLnBhcnNlKHByb2plY3RzRnJvbUxvY2FsKTtcbiAgbGV0IHByb2plY3RzID0gbmV3IFByb2plY3RzKCk7XG4gIGZvciAobGV0IHByb2plY3RGcm9tTG9jYWwgb2YgcHJvamVjdHNGcm9tTG9jYWwpIHtcbiAgICBsZXQgdGl0bGUgPSBwcm9qZWN0RnJvbUxvY2FsW1widGl0bGVcIl07XG4gICAgbGV0IHRvZG9zID0gcHJvamVjdEZyb21Mb2NhbFtcInRvZG9zXCJdO1xuICAgIGxldCBwcm9qZWN0ID0gbmV3IFByb2plY3QodGl0bGUpO1xuICAgIGZvciAobGV0IHRvZG8gb2YgdG9kb3MpIHtcbiAgICAgIGxldCB0b2RvVGl0bGUgPSB0b2RvW1widGl0bGVcIl07XG4gICAgICBsZXQgdG9kb0Rlc2NyaXB0aW9uID0gdG9kb1tcImRlc2NyaXB0aW9uXCJdO1xuICAgICAgbGV0IHRvZG9EdWUgPSB0b2RvW1wiZHVlXCJdO1xuICAgICAgbGV0IHRvZG9Qcmlvcml0eSA9IHRvZG9bXCJwcmlvcml0eVwiXTtcbiAgICAgIGxldCBwcm9qZWN0VG9kbyA9IG5ldyBUb2RvKFxuICAgICAgICB0b2RvVGl0bGUsXG4gICAgICAgIHRvZG9EZXNjcmlwdGlvbixcbiAgICAgICAgdG9kb0R1ZSxcbiAgICAgICAgdG9kb1ByaW9yaXR5XG4gICAgICApO1xuICAgICAgcHJvamVjdC5hZGRUb2RvKHByb2plY3RUb2RvKTtcbiAgICB9XG4gICAgcHJvamVjdHMuYWRkUHJvamVjdChwcm9qZWN0KTtcbiAgfVxuICByZXR1cm4gcHJvamVjdHM7XG59XG5cbi8vIFVwZGF0ZXMgc3RvcmFnZSBpbiBicm93c2VyIHRvIHJlZmxlY3QgYWRkZWQgaXRlbS5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVJbmJveFN0b3JhZ2UoaW5ib3gpIHtcbiAgbG9jYWxTdG9yYWdlW1wiaW5ib3hcIl0gPSBpbmJveC5zdHJpbmdpZnkoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVByb2plY3RzU3RvcmFnZShwcm9qZWN0cykge1xuICBsb2NhbFN0b3JhZ2VbXCJwcm9qZWN0c1wiXSA9IHByb2plY3RzLnN0cmluZ2lmeSgpO1xufVxuIiwiaW1wb3J0IHsgdXBkYXRlSW5ib3hTdG9yYWdlLCB1cGRhdGVQcm9qZWN0c1N0b3JhZ2UgfSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5pbXBvcnQgeyBTaW1wbGVUb2RvLCBUb2RvIH0gZnJvbSBcIi4vdG9kb1wiO1xuaW1wb3J0IHsgY3JlYXRlUHJvamVjdEZvcm0gfSBmcm9tIFwiLi9mb3JtXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFJlbW92ZSBsaXN0IGJ1dHRvbiBldmVudCBsaXN0ZW5lclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVBhcmVudChlKSB7XG4gIGxldCBwYXJlbnQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICBwYXJlbnQucmVtb3ZlKCk7XG59XG5cbi8vIFJlbXZvZXMgY2hpbGRyZW4gZnJvbSBtYWluXG4vLyBSZW1vdmVzIGZvcm0gSUYgcHJlc2VudFxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKCkge1xuICBsZXQgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdFwiKTtcbiAgd2hpbGUgKGxpc3QuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgbGlzdC5yZW1vdmVDaGlsZChsaXN0LmZpcnN0Q2hpbGQpO1xuICB9XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luYm94LWZvcm1cIikpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luYm94LWZvcm1cIikucmVtb3ZlKCk7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWZvcm1cIikpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtZm9ybVwiKS5yZW1vdmUoKTtcbiAgfVxufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ2xlYXJzIGxpc3QgaW4gbmF2LlxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuRnJvbU5hdigpIHtcbiAgbGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RzLWxpc3RcIik7XG4gIHdoaWxlIChsaXN0LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgIGxpc3QucmVtb3ZlQ2hpbGQobGlzdC5maXJzdENoaWxkKTtcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQb3B1bGF0ZXMgaW5ib3hcbmV4cG9ydCBmdW5jdGlvbiBwb3B1bGF0ZUluYm94KGluYm94LCBsaXN0KSB7XG4gIGZvciAobGV0IHRvZG8gb2YgaW5ib3guaW5ib3gpIHtcbiAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbGkuc2V0QXR0cmlidXRlKFwiZGF0YVwiLCB0b2RvLnRpdGxlKTtcblxuICAgIGxldCB0b2RvVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdG9kb1RleHQudGV4dENvbnRlbnQgPSBgJHt0b2RvLnRpdGxlfSAke3RvZG8uZGVzY3JpcHRpb259YDtcblxuICAgIGxldCBjaGVja2JveCA9IGNyZWF0ZUNoZWNrYm94KGluYm94KTtcblxuICAgIC8vIEFkZCBlbGVtZW50cyB0byBsaS5cbiAgICBsaS5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgbGkuYXBwZW5kQ2hpbGQodG9kb1RleHQpO1xuICAgIGxpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFBvcHVsYXRlcyBwcm9qZWN0c1xuZXhwb3J0IGZ1bmN0aW9uIHBvcHVsYXRlTWFpbihwcm9qZWN0KSB7XG4gIGxldCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0XCIpO1xuICBsZXQgdG9kb3MgPSBwcm9qZWN0LnByb2plY3RbXCJ0b2Rvc1wiXTtcbiAgZm9yIChsZXQgdG9kbyBvZiB0b2Rvcykge1xuICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBsaS5zZXRBdHRyaWJ1dGUoXCJkYXRhXCIsIHRvZG8udGl0bGUpO1xuXG4gICAgbGV0IHRvZG9UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0b2RvVGV4dC50ZXh0Q29udGVudCA9IGAke3RvZG8udGl0bGV9ICR7dG9kby5kZXNjcmlwdGlvbn0gJHt0b2RvLmR1ZX0gJHt0b2RvLnByaW9yaXR5fWA7XG5cbiAgICAvLyBUT0RPOiBDcmVhdGUgY2hlY2tib3hcblxuICAgIC8vIEFkZCBlbGVtZGVudHMgdG8gbGkuXG4gICAgbGkuYXBwZW5kQ2hpbGQodG9kb1RleHQpO1xuICAgIGxpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFBvcHVsYXRlcyBwcm9qZWN0cyB0aXRsZSBvbiBuYXZcbmV4cG9ydCBmdW5jdGlvbiBwb3B1bGF0ZVByb2plY3RzKHByb2plY3RzLCBsaXN0KSB7XG4gIGZvciAobGV0IHByb2plY3Qgb2YgcHJvamVjdHMucHJvamVjdHMpIHtcbiAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbGkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luYm94LWZvcm1cIikpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbmJveC1mb3JtXCIpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgcmVtb3ZlQ2hpbGRyZW4oKTtcbiAgICAgIHBvcHVsYXRlTWFpbihwcm9qZWN0KTtcbiAgICAgIGNyZWF0ZVByb2plY3RGb3JtKHByb2plY3QsIHByb2plY3RzKTtcbiAgICB9KTtcblxuICAgIGxldCBwcm9qZWN0VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdFRleHQudGV4dENvbnRlbnQgPSBgJHtwcm9qZWN0LnByb2plY3RUaXRsZX1gO1xuXG4gICAgbGkuYXBwZW5kQ2hpbGQocHJvamVjdFRleHQpO1xuICAgIGxpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENyZWF0ZSBhbmQgYWRkIGEgdG9kbyBmb3IgaW5ib3guXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2RvKGluYm94LCBsaXN0KSB7XG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGVcIik7XG4gIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XG4gIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgbGkuc2V0QXR0cmlidXRlKFwiZGF0YVwiLCB0aXRsZS52YWx1ZSk7XG5cbiAgbGV0IHRvZG9UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgdG9kb1RleHQudGV4dENvbnRlbnQgPSBgJHt0aXRsZS52YWx1ZX0gJHtkZXNjcmlwdGlvbi52YWx1ZX1gO1xuXG4gIC8vIENoZWNrYm94IGZvciByZW1vdmluZyBsaXN0IGl0ZW0uXG4gIGxldCBjaGVja2JveCA9IGNyZWF0ZUNoZWNrYm94KGluYm94KTtcblxuICBsaS5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gIGxpLmFwcGVuZENoaWxkKHRvZG9UZXh0KTtcbiAgbGlzdC5hcHBlbmRDaGlsZChsaSk7XG5cbiAgbGV0IHRvZG8gPSBuZXcgU2ltcGxlVG9kbyh0aXRsZS52YWx1ZSwgZGVzY3JpcHRpb24udmFsdWUpO1xuICBpbmJveC5hZGRUb2RvKHRvZG8pO1xuXG4gIHVwZGF0ZUluYm94U3RvcmFnZShpbmJveCk7IC8vIFVwZGF0ZXMgbG9jYWwgc3RvcmFnZVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDcmVhdGUgYW5kIGFkZCBhIHRvZG8gZm9yIHByb2plY3QuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2RvUHJvamVjdChwcm9qZWN0LCBwcm9qZWN0cywgbGlzdCkge1xuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpO1xuICBsZXQgZHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkdWVcIik7XG4gIGxldCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIik7XG5cbiAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICBsaS5zZXRBdHRyaWJ1dGUoXCJkYXRhXCIsIHRpdGxlLnZhbHVlKTtcblxuICAvLyBUT0RPOiBBZGQgY2hlY2tib3ggZm9yIHJlbW92YWxcblxuICBsZXQgdG9kb1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0b2RvVGV4dC50ZXh0Q29udGVudCA9IGAke3RpdGxlLnZhbHVlfSAke2Rlc2NyaXB0aW9uLnZhbHVlfSAke2R1ZS52YWx1ZX0gJHtwcmlvcml0eS52YWx1ZX1gO1xuXG4gIGxpLmFwcGVuZENoaWxkKHRvZG9UZXh0KTtcbiAgbGlzdC5hcHBlbmRDaGlsZChsaSk7XG5cbiAgbGV0IHRvZG8gPSBuZXcgVG9kbyhcbiAgICB0aXRsZS52YWx1ZSxcbiAgICBkZXNjcmlwdGlvbi52YWx1ZSxcbiAgICBkdWUudmFsdWUsXG4gICAgcHJpb3JpdHkudmFsdWVcbiAgKTtcblxuICBwcm9qZWN0LmFkZFRvZG8odG9kbyk7XG4gIHVwZGF0ZVByb2plY3RzU3RvcmFnZShwcm9qZWN0cyk7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENyZWF0ZXMgY2hlY2tib3guXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hlY2tib3goaW5ib3gpIHtcbiAgbGV0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XG4gIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGUpID0+IHtcbiAgICBpbmJveC5yZW1vdmVUb2RvKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YVwiKSk7XG4gICAgcmVtb3ZlUGFyZW50KGUpO1xuICAgIHVwZGF0ZUluYm94U3RvcmFnZShpbmJveCk7XG4gIH0pO1xuICByZXR1cm4gY2hlY2tib3g7XG59XG4iLCJpbXBvcnQgeyBnZW5lcmF0ZVRvZG8sIGdlbmVyYXRlVG9kb1Byb2plY3QgfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgeyByZW1vdmVDaGlsZHJlbkZyb21OYXYsIHBvcHVsYXRlUHJvamVjdHMgfSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENyZWF0ZXMgaW5ib3ggZm9ybVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUluYm94Rm9ybShpbmJveCwgbGlzdCkge1xuICBsZXQgZm9ybURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGZvcm1EaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJpbmJveC1mb3JtXCIpO1xuXG4gIGxldCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwidGl0bGVcIik7XG4gIHRpdGxlSW5wdXQuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJUaXRsZVwiKTtcblxuICBsZXQgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgZGVzY3JpcHRpb25JbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgZGVzY3JpcHRpb25JbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImRlc2NyaXB0aW9uXCIpO1xuICBkZXNjcmlwdGlvbklucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiRGVzY3JpcHRpb25cIik7XG5cbiAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICBidXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJhZGQtdG9kby1idXR0b25cIik7XG4gIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkXCI7XG5cbiAgLy8gQWRkIGl0ZW0gd2hlbiBjbGlja2luZyBhZGQgYnV0dG9uLlxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBnZW5lcmF0ZVRvZG8oaW5ib3gsIGxpc3QpO1xuXG4gICAgLy8gQ2xlYXIgZm9ybSBpbnB1dFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGVcIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIikudmFsdWUgPSBcIlwiO1xuICB9KTtcblxuICBmb3JtRGl2LmFwcGVuZENoaWxkKHRpdGxlSW5wdXQpO1xuICBmb3JtRGl2LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uSW5wdXQpO1xuICBmb3JtRGl2LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgbGlzdC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGZvcm1EaXYpO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ3JlYXRlcyBwcm9qZWN0IHRvZG8gZm9ybVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RGb3JtKHByb2plY3QsIHByb2plY3RzKSB7XG4gIGxldCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0XCIpO1xuICBsZXQgZm9ybURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGZvcm1EaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0LWZvcm1cIik7XG5cbiAgbGV0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIHRpdGxlSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gIHRpdGxlSW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0aXRsZVwiKTtcbiAgdGl0bGVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcIlRpdGxlXCIpO1xuXG4gIGxldCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBkZXNjcmlwdGlvbklucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICBkZXNjcmlwdGlvbklucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGVzY3JpcHRpb25cIik7XG4gIGRlc2NyaXB0aW9uSW5wdXQuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJEZXNjcmlwdGlvblwiKTtcblxuICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICBsZXQgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gIGxldCBtb250aCA9ICh0b2RheS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gIGxldCBkYXkgPSB0b2RheS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cbiAgbGV0IGZvcm1hdHRlZERhdGUgPSBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gO1xuXG4gIGxldCBkdWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgZHVlSW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkdWVcIik7XG4gIGR1ZUlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICBkdWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBmb3JtYXR0ZWREYXRlKTtcblxuICBsZXQgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICBwcmlvcml0eVNlbGVjdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByaW9yaXR5XCIpO1xuICBsZXQgdmFsdWVzID0gW1wibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiXTtcbiAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHZhbHVlKTtcbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgICBwcmlvcml0eVNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICB9XG5cbiAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICBidXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJhZGQtdG9kby1idXR0b25cIik7XG4gIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkXCI7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGdlbmVyYXRlVG9kb1Byb2plY3QocHJvamVjdCwgcHJvamVjdHMsIGxpc3QpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGVcIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZHVlXCIpLnZhbHVlID0gZm9ybWF0dGVkRGF0ZTtcbiAgfSk7XG5cbiAgZm9ybURpdi5hcHBlbmRDaGlsZCh0aXRsZUlucHV0KTtcbiAgZm9ybURpdi5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbklucHV0KTtcbiAgZm9ybURpdi5hcHBlbmRDaGlsZChkdWVJbnB1dCk7XG4gIGZvcm1EaXYuYXBwZW5kQ2hpbGQocHJpb3JpdHlTZWxlY3QpO1xuICBmb3JtRGl2LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgbGlzdC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGZvcm1EaXYpO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ3JlYXRlcyBwcm9qZWN0IG5hbWUgZm9ybVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3ROYW1lRm9ybShwcm9qZWN0cywgbGlzdCkge1xuICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbGV0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBsZXQgYWRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICBjb250YWluZXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0LW5hbWUtY29udGFpbmVyXCIpO1xuXG4gIGlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByb2plY3QtbmFtZVwiKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJQcm9qZWN0IG5hbWVcIik7XG5cbiAgYWRkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWRkLXByb2plY3QtYnV0dG9uXCIpO1xuICBhZGQudGV4dENvbnRlbnQgPSBcIkFkZFwiO1xuXG4gIC8vIEV2ZW50IGxpc3RlbmVyIGZvciBhZGRpbmcgcHJvamVjdCBhZnRlciB0eXBpbmcgbmFtZVxuICBhZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwcm9qZWN0cy5hZGRQcm9qZWN0KG5ldyBQcm9qZWN0KGlucHV0LnZhbHVlKSk7XG5cbiAgICAvLyBXZSB3YW50IHRvIHJlZmxlY3QgdGhlIGFkZGVkIHByb2plY3Qgb24gdGhlIGxpc3QuXG4gICAgcmVtb3ZlQ2hpbGRyZW5Gcm9tTmF2KGxpc3QpO1xuICAgIHBvcHVsYXRlUHJvamVjdHMocHJvamVjdHMsIGxpc3QpO1xuICB9KTtcblxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkKTtcbiAgbGlzdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xufVxuIiwiaW1wb3J0IHtcbiAgY2hlY2tTdG9yYWdlLFxuICBsb2FkSW5ib3hGcm9tU3RvcmFnZSxcbiAgbG9hZFByb2plY3RzRnJvbVN0b3JhZ2UsXG59IGZyb20gXCIuL3N0b3JhZ2VcIjtcbmltcG9ydCB7IGNyZWF0ZUluYm94Rm9ybSwgY3JlYXRlUHJvamVjdE5hbWVGb3JtIH0gZnJvbSBcIi4vZm9ybVwiO1xuaW1wb3J0IHtcbiAgcmVtb3ZlQ2hpbGRyZW4sXG4gIHJlbW92ZUNoaWxkcmVuRnJvbU5hdixcbiAgcG9wdWxhdGVJbmJveCxcbiAgcG9wdWxhdGVQcm9qZWN0cyxcbn0gZnJvbSBcIi4vaGVscGVyRnVuY3Rpb25zXCI7XG4vLyBpbXBvcnQgeyBjbGVhckxvY2FsU3RvcmFnZSB9IGZyb20gXCIuL3Rlc3RcIjtcblxubGV0IGluYm94O1xubGV0IHByb2plY3RzO1xuXG4vLyBJbmJveCBidXR0b24gZXZlbnQgbGlzdGVuZXIgc3R1ZmYuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luYm94XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGxldCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0XCIpO1xuICByZW1vdmVDaGlsZHJlbigpOyAvLyBDbGVhciBjb250ZW50XG4gIHBvcHVsYXRlSW5ib3goaW5ib3gsIGxpc3QpOyAvLyBQb3B1bGF0ZVxuICBjcmVhdGVJbmJveEZvcm0oaW5ib3gsIGxpc3QpOyAvLyBDcmVhdGUgJiBhZGQgZm9ybVxufSk7XG5cbi8vIFByb2plY3RzIGJ1dHRvbiBldmVudCBsaXN0ZW5lciBzdHVmZi5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdHNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RzLWxpc3RcIik7XG5cbiAgLy8gQWxsb3dzIGZvciB0b2dnbGluZyBmdW5jdGlvbmFsaXR5XG4gIGlmIChsaXN0LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgIHJlbW92ZUNoaWxkcmVuRnJvbU5hdihsaXN0KTtcbiAgfSBlbHNlIHtcbiAgICByZW1vdmVDaGlsZHJlbkZyb21OYXYobGlzdCk7XG4gICAgcG9wdWxhdGVQcm9qZWN0cyhwcm9qZWN0cywgbGlzdCk7XG4gIH1cblxuICBwcm9qZWN0cy5zaG93UHJvamVjdHMoKTtcbn0pO1xuXG4vLyBBZGQgcHJvamVjdCBidXR0b24gZXZlbnQgbGlzdGVuZXIgc3R1ZmYuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1wcm9qZWN0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGxldCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0cy1saXN0XCIpO1xuICByZW1vdmVDaGlsZHJlbkZyb21OYXYoKTtcbiAgcG9wdWxhdGVQcm9qZWN0cyhwcm9qZWN0cywgbGlzdCk7XG4gIGNyZWF0ZVByb2plY3ROYW1lRm9ybShwcm9qZWN0cywgbGlzdCk7XG59KTtcblxuLy8gbGV0IHNhbXBsZVByb2plY3RzID0gW1xuLy8gICB7XG4vLyAgICAgdGl0bGU6IFwidGl0bGUxXCIsXG4vLyAgICAgdG9kb3M6IFtcbi8vICAgICAgIHsgdGl0bGU6IFwidG9kbzFcIiwgZGVzY3JpcHRpb246IFwiZGVzYzFcIiwgZHVlOiBcInRvZGF5XCIsIHNldmVyaXR5OiBcImxvd1wiIH0sXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRpdGxlOiBcInRvZG8yXCIsXG4vLyAgICAgICAgIGRlc2NyaXB0aW9uOiBcImRlc2MyXCIsXG4vLyAgICAgICAgIGR1ZTogXCJ0b21vcnJvd1wiLFxuLy8gICAgICAgICBzZXZlcml0eTogXCJtZWRpdW1cIixcbi8vICAgICAgIH0sXG4vLyAgICAgXSxcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIHRpdGxlOiBcInRpdGxlMlwiLFxuLy8gICAgIHRvZG9zOiBbXG4vLyAgICAgICB7XG4vLyAgICAgICAgIHRpdGxlOiBcInRvZG81XCIsXG4vLyAgICAgICAgIGRlc2NyaXB0aW9uOiBcImRlc2M1XCIsXG4vLyAgICAgICAgIGR1ZTogXCJ5ZXN0ZXJkYXlcIixcbi8vICAgICAgICAgc2V2ZXJpdHk6IFwiaGlnaFwiLFxuLy8gICAgICAgfSxcbi8vICAgICBdLFxuLy8gICB9LFxuLy8gICB7IHRpdGxlOiBcInRpdGxlM1wiLCB0b2RvczogW10gfSxcbi8vIF07XG4vLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KHNhbXBsZVByb2plY3RzKSk7XG5cbi8vIGNsZWFyTG9jYWxTdG9yYWdlKCk7XG5jaGVja1N0b3JhZ2UoKTtcbmluYm94ID0gbG9hZEluYm94RnJvbVN0b3JhZ2UoKTtcbi8vIGluYm94LnNob3dJbmJveCgpO1xuXG5wcm9qZWN0cyA9IGxvYWRQcm9qZWN0c0Zyb21TdG9yYWdlKCk7XG4vLyBwcm9qZWN0cy5zaG93UHJvamVjdHMoKTtcbiJdLCJuYW1lcyI6WyJJbmJveCIsImFkZFRvZG8iLCJ0b2RvIiwidGhpcyIsInB1c2giLCJpbmJveCIsInJlbW92ZVRvZG8iLCJ0aXRsZSIsImluZGV4IiwiaSIsImxlbmd0aCIsInNwbGljZSIsInN0cmluZ2lmeSIsImdldFRvZG8iLCJKU09OIiwic2hvd0luYm94Iiwic2hvd1RvZG8iLCJUb2RvIiwiY29uc3RydWN0b3IiLCJkZXNjcmlwdGlvbiIsImR1ZSIsInByaW9yaXR5IiwiY29uc29sZSIsImxvZyIsIlNpbXBsZVRvZG8iLCJQcm9qZWN0cyIsInByb2plY3RzIiwiYWRkUHJvamVjdCIsInByb2plY3QiLCJyZW1vdmVQcm9qZWN0Iiwic2hvd1Byb2plY3RzIiwic2hvd1Byb2plY3QiLCJQcm9qZWN0IiwicHJvamVjdFRpdGxlIiwidXBkYXRlSW5ib3hTdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlQ2hpbGRyZW4iLCJsaXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiZmlyc3RDaGlsZCIsInJlbW92ZSIsInJlbW92ZUNoaWxkcmVuRnJvbU5hdiIsInBvcHVsYXRlTWFpbiIsInRvZG9zIiwibGkiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwidG9kb1RleHQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwicG9wdWxhdGVQcm9qZWN0cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjcmVhdGVQcm9qZWN0Rm9ybSIsInByb2plY3RUZXh0IiwiY3JlYXRlQ2hlY2tib3giLCJjaGVja2JveCIsImUiLCJ0YXJnZXQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlUGFyZW50IiwiZm9ybURpdiIsInRpdGxlSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwidG9kYXkiLCJEYXRlIiwiZm9ybWF0dGVkRGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImR1ZUlucHV0IiwicHJpb3JpdHlTZWxlY3QiLCJ2YWx1ZXMiLCJ2YWx1ZSIsIm9wdGlvbiIsImJ1dHRvbiIsInVwZGF0ZVByb2plY3RzU3RvcmFnZSIsImdlbmVyYXRlVG9kb1Byb2plY3QiLCJwYXJlbnROb2RlIiwicG9wdWxhdGVJbmJveCIsImdlbmVyYXRlVG9kbyIsImNyZWF0ZUluYm94Rm9ybSIsImNvbnRhaW5lciIsImlucHV0IiwiYWRkIiwiY3JlYXRlUHJvamVjdE5hbWVGb3JtIiwic2V0SXRlbSIsImNoZWNrU3RvcmFnZSIsImluYm94RnJvbUxvY2FsIiwiZ2V0SXRlbSIsInBhcnNlIiwidG9kb0Zyb21Mb2NhbCIsImxvYWRJbmJveEZyb21TdG9yYWdlIiwicHJvamVjdHNGcm9tTG9jYWwiLCJwcm9qZWN0RnJvbUxvY2FsIiwidG9kb1RpdGxlIiwidG9kb0Rlc2NyaXB0aW9uIiwidG9kb0R1ZSIsInRvZG9Qcmlvcml0eSIsInByb2plY3RUb2RvIiwibG9hZFByb2plY3RzRnJvbVN0b3JhZ2UiXSwic291cmNlUm9vdCI6IiJ9