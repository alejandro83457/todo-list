(()=>{"use strict";class t{#t=[];addTodo(t){this.#t.push(t)}get inbox(){return this.#t}removeTodo(t){let e;for(let o=0;o<this.#t.length;o++)this.#t[o].title==t&&(e=o);this.#t.splice(e,1)}stringify(){let t=[];for(let e of this.#t)t.push(e.getTodo());return JSON.stringify(t)}showInbox(){for(let t of this.#t)t.showTodo()}}class e{#e;#o;#i;#r;constructor(t,e,o,i){this.#e=t,this.#o=e,this.#i=o,this.#r=i}get title(){return this.#e}get description(){return this.#o}get due(){return this.#i}get priority(){return this.#r}getTodo(){return{title:this.#e,description:this.#o,due:this.#i,priority:this.#r}}showTodo(){console.log(`\t${this.#e} ${this.#o} ${this.#i} ${this.#r}`)}}class o{#e;#o;constructor(t,e){this.#e=t,this.#o=e}get title(){return this.#e}get description(){return this.#o}getTodo(){return{title:this.#e,description:this.#o}}showTodo(){console.log(`${this.#e} ${this.#o}`)}}class i{#n=[];get projects(){return this.#n}addProject(t){this.#n.push(t)}removeProject(t){let e;for(let o=0;o<this.#n.length;o++)this.#n[o].title==t&&(e=o);this.#n.splice(e,1)}stringify(){let t=[];for(let e of this.#n)t.push(e.stringify());return JSON.stringify(t)}showProjects(){for(let t of this.#n)t.showProject()}}class r{#l={};constructor(t){this.#l.title=t,this.#l.todos=[]}get projectTitle(){return this.#l.title}get project(){return this.#l}stringify(){let t={};t.title=this.#l.title,t.todos=[];for(let e of this.#l.todos)t.todos.push(e.getTodo());return t}addTodo(t){this.#l.todos.push(t)}removeTodo(t){let e;for(let o=0;o<this.#l.todos.length;o++)this.#l.todos[o].title==t&&(e=o);this.#l.todos.splice(e,1)}showProject(){console.log(this.#l.title);for(let t of this.#l.todos)t.showTodo()}}function n(t){localStorage.inbox=t.stringify()}function l(t){localStorage.projects=t.stringify()}function d(t){t.target.parentElement.remove()}function c(){let t=document.querySelector("#list");for(;t.childNodes.length>0;)t.removeChild(t.firstChild);document.querySelector("#inbox-form")?document.querySelector("#inbox-form").remove():document.querySelector("#project-form")&&document.querySelector("#project-form").remove()}function u(){let t=document.querySelector("#projects-list");for(;t.childNodes.length>0;)t.removeChild(t.firstChild)}function s(t,e){let o=document.querySelector("#list"),i=e.project.todos;for(let r of i){let i=document.createElement("li");i.setAttribute("data",r.title);let n=document.createElement("div");n.textContent=`${r.title} ${r.description} ${r.due} ${r.priority}`;let l=h(t,e);i.appendChild(l),i.appendChild(n),o.appendChild(i)}}function p(t,e){for(let o of t.projects){let i=document.createElement("li");i.addEventListener("click",(()=>{document.querySelector("#inbox-form")&&document.querySelector("#inbox-form").remove(),c(),s(t,o),m(o,t)}));let r=document.createElement("div");r.textContent=`${o.projectTitle}`,i.appendChild(r),e.appendChild(i)}}function a(t){let e=document.createElement("input");return e.setAttribute("type","checkbox"),e.addEventListener("change",(e=>{t.removeTodo(e.target.parentElement.getAttribute("data")),d(e),n(t)})),e}function h(t,e){let o=document.createElement("input");return o.setAttribute("type","checkbox"),o.addEventListener("change",(o=>{e.removeTodo(o.target.parentElement.getAttribute("data")),d(o),l(t)})),o}function m(t,o){let i=document.querySelector("#list"),r=document.createElement("div");r.setAttribute("id","project-form");let n=document.createElement("input");n.setAttribute("type","text"),n.setAttribute("id","title"),n.setAttribute("placeholder","Title");let d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("id","description"),d.setAttribute("placeholder","Description");let c=new Date,u=`${c.getFullYear()}-${(c.getMonth()+1).toString().padStart(2,"0")}-${c.getDate().toString().padStart(2,"0")}`,s=document.createElement("input");s.setAttribute("id","due"),s.setAttribute("type","date"),s.setAttribute("value",u);let p=document.createElement("select");p.setAttribute("id","priority");let a=["low","medium","high"];for(let t of a){let e=document.createElement("option");e.setAttribute("value",t),e.textContent=t,p.appendChild(e)}let m=document.createElement("button");m.setAttribute("type","button"),m.setAttribute("id","add-todo-button"),m.textContent="Add",m.addEventListener("click",(()=>{!function(t,o,i){let r=document.querySelector("#title"),n=document.querySelector("#description"),d=document.querySelector("#due"),c=document.querySelector("#priority"),u=document.createElement("li");u.setAttribute("data",r.value);let s=h(o,t),p=document.createElement("div");p.textContent=`${r.value} ${n.value} ${d.value} ${c.value}`,u.appendChild(s),u.appendChild(p),i.appendChild(u);let a=new e(r.value,n.value,d.value,c.value);t.addTodo(a),l(o)}(t,o,i),document.querySelector("#title").value="",document.querySelector("#description").value="",document.querySelector("#due").value=u})),r.appendChild(n),r.appendChild(d),r.appendChild(s),r.appendChild(p),r.appendChild(m),i.parentNode.appendChild(r)}let f,b;document.querySelector("#inbox").addEventListener("click",(()=>{let t=document.querySelector("#list");c(),function(t,e){for(let o of t.inbox){let i=document.createElement("li");i.setAttribute("data",o.title);let r=document.createElement("div");r.textContent=`${o.title} ${o.description}`;let n=a(t);i.appendChild(n),i.appendChild(r),e.appendChild(i)}}(f,t),function(t,e){let i=document.createElement("div");i.setAttribute("id","inbox-form");let r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("id","title"),r.setAttribute("placeholder","Title");let l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","description"),l.setAttribute("placeholder","Description");let d=document.createElement("button");d.setAttribute("type","button"),d.setAttribute("id","add-todo-button"),d.textContent="Add",d.addEventListener("click",(()=>{!function(t,e){let i=document.querySelector("#title"),r=document.querySelector("#description"),l=document.createElement("li");l.setAttribute("data",i.value);let d=document.createElement("div");d.textContent=`${i.value} ${r.value}`;let c=a(t);l.appendChild(c),l.appendChild(d),e.appendChild(l);let u=new o(i.value,r.value);t.addTodo(u),n(t)}(t,e),document.querySelector("#title").value="",document.querySelector("#description").value=""})),i.appendChild(r),i.appendChild(l),i.appendChild(d),e.parentNode.appendChild(i)}(f,t)})),document.querySelector("#projects").addEventListener("click",(()=>{let t=document.querySelector("#projects-list");t.childNodes.length>0?u():(u(),p(b,t)),b.showProjects()})),document.querySelector("#add-project").addEventListener("click",(()=>{let t=document.querySelector("#projects-list");u(),p(b,t),function(t,e){let o=document.createElement("div"),i=document.createElement("input"),n=document.createElement("div");o.setAttribute("id","project-name-container"),i.setAttribute("type","text"),i.setAttribute("id","project-name"),i.setAttribute("placeholder","Project name"),n.setAttribute("id","add-project-button"),n.textContent="Add",n.addEventListener("click",(()=>{t.addProject(new r(i.value)),u(),p(t,e),l(t)})),o.appendChild(i),o.appendChild(n),e.appendChild(o)}(b,t)})),function(){if(0==localStorage.length){console.log("Empty. Loading content...");let t=[],e=[];localStorage.setItem("inbox",JSON.stringify(t)),localStorage.setItem("projects",JSON.stringify(e))}else console.log("Content found.")}(),f=function(){let e=localStorage.getItem("inbox");e=JSON.parse(e);let i=new t;for(let t of e){let e=t.title,r=t.description,n=new o(e,r);i.addTodo(n)}return i}(),b=function(){let t=localStorage.getItem("projects");t=JSON.parse(t);let o=new i;if(0==t.length)return o;for(let i of t){let t=i.title,n=i.todos,l=new r(t);for(let t of n){let o=t.title,i=t.description,r=t.due,n=t.priority,d=new e(o,i,r,n);l.addTodo(d)}o.addProject(l)}return o}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnJGLEtBQUtrRixNQUFNRyxHQUMvQixJQUFJekUsRUFBVyxJQUFJRCxFQUNuQixHQUFnQyxHQUE1QjBFLEVBQWtCekYsT0FBYSxPQUFPZ0IsRUFDMUMsSUFBSyxJQUFJMEUsS0FBb0JELEVBQW1CLENBQzlDLElBQUk1RixFQUFRNkYsRUFBd0IsTUFDaENqRCxFQUFRaUQsRUFBd0IsTUFDaEN4RSxFQUFVLElBQUlJLEVBQVF6QixHQUMxQixJQUFLLElBQUlMLEtBQVFpRCxFQUFPLENBQ3RCLElBQUlrRCxFQUFZbkcsRUFBWSxNQUN4Qm9HLEVBQWtCcEcsRUFBa0IsWUFDcENxRyxFQUFVckcsRUFBVSxJQUNwQnNHLEVBQWV0RyxFQUFlLFNBQzlCdUcsRUFBYyxJQUFJeEYsRUFDcEJvRixFQUNBQyxFQUNBQyxFQUNBQyxHQUVGNUUsRUFBUTNCLFFBQVF3RyxFQUNsQixDQUNBL0UsRUFBU0MsV0FBV0MsRUFDdEIsQ0FDQSxPQUFPRixDQUNULENHeUJXZ0YsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmJveC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaGVscGVyRnVuY3Rpb25zLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9mb3JtLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBJbmJveCB7XG4gICNpbmJveCA9IFtdO1xuXG4gIGFkZFRvZG8odG9kbykge1xuICAgIHRoaXMuI2luYm94LnB1c2godG9kbyk7XG4gIH1cblxuICBnZXQgaW5ib3goKSB7XG4gICAgcmV0dXJuIHRoaXMuI2luYm94O1xuICB9XG5cbiAgcmVtb3ZlVG9kbyh0aXRsZSkge1xuICAgIGxldCBpbmRleDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuI2luYm94Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy4jaW5ib3hbaV0udGl0bGUgPT0gdGl0bGUpIGluZGV4ID0gaTtcbiAgICB9XG4gICAgdGhpcy4jaW5ib3guc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIHN0cmluZ2lmeSgpIHtcbiAgICBsZXQgaW5ib3ggPSBbXTtcbiAgICBmb3IgKGxldCB0b2RvIG9mIHRoaXMuI2luYm94KSB7XG4gICAgICBpbmJveC5wdXNoKHRvZG8uZ2V0VG9kbygpKTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGluYm94KTtcbiAgfVxuXG4gIHNob3dJbmJveCgpIHtcbiAgICBmb3IgKGxldCB0b2RvIG9mIHRoaXMuI2luYm94KSB7XG4gICAgICB0b2RvLnNob3dUb2RvKCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IEluYm94IH07XG4iLCIvLyBVc2VkIGZvciBwcm9qZWN0c1xuY2xhc3MgVG9kbyB7XG4gICN0aXRsZTtcbiAgI2Rlc2NyaXB0aW9uO1xuICAjZHVlO1xuICAjcHJpb3JpdHk7XG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlLCBwcmlvcml0eSkge1xuICAgIHRoaXMuI3RpdGxlID0gdGl0bGU7XG4gICAgdGhpcy4jZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLiNkdWUgPSBkdWU7XG4gICAgdGhpcy4jcHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgfVxuICBnZXQgdGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3RpdGxlO1xuICB9XG4gIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy4jZGVzY3JpcHRpb247XG4gIH1cbiAgZ2V0IGR1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jZHVlO1xuICB9XG4gIGdldCBwcmlvcml0eSgpIHtcbiAgICByZXR1cm4gdGhpcy4jcHJpb3JpdHk7XG4gIH1cbiAgZ2V0VG9kbygpIHtcbiAgICBsZXQgdGl0bGUgPSB0aGlzLiN0aXRsZTtcbiAgICBsZXQgZGVzY3JpcHRpb24gPSB0aGlzLiNkZXNjcmlwdGlvbjtcbiAgICBsZXQgZHVlID0gdGhpcy4jZHVlO1xuICAgIGxldCBwcmlvcml0eSA9IHRoaXMuI3ByaW9yaXR5O1xuICAgIHJldHVybiB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlLCBwcmlvcml0eSB9O1xuICB9XG4gIHNob3dUb2RvKCkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFxcdCR7dGhpcy4jdGl0bGV9ICR7dGhpcy4jZGVzY3JpcHRpb259ICR7dGhpcy4jZHVlfSAke3RoaXMuI3ByaW9yaXR5fWBcbiAgICApO1xuICB9XG59XG5cbi8vIFVzZWQgZm9yIGluYm94IG9ubHlcbmNsYXNzIFNpbXBsZVRvZG8ge1xuICAjdGl0bGU7XG4gICNkZXNjcmlwdGlvbjtcbiAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy4jdGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLiNkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICB9XG4gIGdldCB0aXRsZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jdGl0bGU7XG4gIH1cbiAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiNkZXNjcmlwdGlvbjtcbiAgfVxuICBnZXRUb2RvKCkge1xuICAgIGxldCB0aXRsZSA9IHRoaXMuI3RpdGxlO1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IHRoaXMuI2Rlc2NyaXB0aW9uO1xuICAgIHJldHVybiB7IHRpdGxlLCBkZXNjcmlwdGlvbiB9O1xuICB9XG4gIHNob3dUb2RvKCkge1xuICAgIGNvbnNvbGUubG9nKGAke3RoaXMuI3RpdGxlfSAke3RoaXMuI2Rlc2NyaXB0aW9ufWApO1xuICB9XG59XG5cbmV4cG9ydCB7IFRvZG8sIFNpbXBsZVRvZG8gfTtcbiIsImV4cG9ydCBjbGFzcyBQcm9qZWN0cyB7XG4gICNwcm9qZWN0cyA9IFtdO1xuXG4gIGdldCBwcm9qZWN0cygpIHtcbiAgICByZXR1cm4gdGhpcy4jcHJvamVjdHM7XG4gIH1cblxuICBhZGRQcm9qZWN0KHByb2plY3QpIHtcbiAgICB0aGlzLiNwcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuICB9XG5cbiAgcmVtb3ZlUHJvamVjdCh0aXRsZSkge1xuICAgIGxldCBpbmRleDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuI3Byb2plY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy4jcHJvamVjdHNbaV0udGl0bGUgPT0gdGl0bGUpIGluZGV4ID0gaTtcbiAgICB9XG4gICAgdGhpcy4jcHJvamVjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIHN0cmluZ2lmeSgpIHtcbiAgICBsZXQgcHJvamVjdHMgPSBbXTtcbiAgICBmb3IgKGxldCBwcm9qZWN0IG9mIHRoaXMuI3Byb2plY3RzKSB7XG4gICAgICBwcm9qZWN0cy5wdXNoKHByb2plY3Quc3RyaW5naWZ5KCkpO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpO1xuICB9XG5cbiAgc2hvd1Byb2plY3RzKCkge1xuICAgIGZvciAobGV0IHByb2plY3Qgb2YgdGhpcy4jcHJvamVjdHMpIHtcbiAgICAgIHByb2plY3Quc2hvd1Byb2plY3QoKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xuICAjcHJvamVjdCA9IHt9O1xuICBjb25zdHJ1Y3Rvcih0aXRsZSkge1xuICAgIHRoaXMuI3Byb2plY3RbXCJ0aXRsZVwiXSA9IHRpdGxlO1xuICAgIHRoaXMuI3Byb2plY3RbXCJ0b2Rvc1wiXSA9IFtdO1xuICB9XG4gIGdldCBwcm9qZWN0VGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuI3Byb2plY3RbXCJ0aXRsZVwiXTtcbiAgfVxuICBnZXQgcHJvamVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy4jcHJvamVjdDtcbiAgfVxuICBzdHJpbmdpZnkoKSB7XG4gICAgbGV0IHByb2plY3QgPSB7fTtcbiAgICBwcm9qZWN0W1widGl0bGVcIl0gPSB0aGlzLiNwcm9qZWN0W1widGl0bGVcIl07XG4gICAgcHJvamVjdFtcInRvZG9zXCJdID0gW107XG4gICAgZm9yIChsZXQgdG9kbyBvZiB0aGlzLiNwcm9qZWN0W1widG9kb3NcIl0pIHtcbiAgICAgIHByb2plY3RbXCJ0b2Rvc1wiXS5wdXNoKHRvZG8uZ2V0VG9kbygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb2plY3Q7XG4gIH1cbiAgYWRkVG9kbyh0b2RvKSB7XG4gICAgdGhpcy4jcHJvamVjdFtcInRvZG9zXCJdLnB1c2godG9kbyk7XG4gIH1cbiAgcmVtb3ZlVG9kbyh0aXRsZSkge1xuICAgIGxldCBpbmRleDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuI3Byb2plY3RbXCJ0b2Rvc1wiXS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuI3Byb2plY3RbXCJ0b2Rvc1wiXVtpXS50aXRsZSA9PSB0aXRsZSkgaW5kZXggPSBpO1xuICAgIH1cbiAgICB0aGlzLiNwcm9qZWN0W1widG9kb3NcIl0uc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuICBzaG93UHJvamVjdCgpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLiNwcm9qZWN0W1widGl0bGVcIl0pO1xuICAgIGZvciAobGV0IHRvZG8gb2YgdGhpcy4jcHJvamVjdFtcInRvZG9zXCJdKSB7XG4gICAgICB0b2RvLnNob3dUb2RvKCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBJbmJveCB9IGZyb20gXCIuL2luYm94XCI7XG5pbXBvcnQgeyBTaW1wbGVUb2RvLCBUb2RvIH0gZnJvbSBcIi4vdG9kb1wiO1xuaW1wb3J0IHsgUHJvamVjdHMsIFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0XCI7XG5cbi8vIENoZWNrIGlmIGxvY2FsU3RvcmFnZSBpcyBzZXQgdXAgcHJvcGVybHkuXG4vLyBJZiB3aWxsIG9ubHkgcnVuIG9uY2UgcGVyIGRldmljZS5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1N0b3JhZ2UoKSB7XG4gIGlmIChsb2NhbFN0b3JhZ2UubGVuZ3RoID09IDApIHtcbiAgICBjb25zb2xlLmxvZyhcIkVtcHR5LiBMb2FkaW5nIGNvbnRlbnQuLi5cIik7XG4gICAgbGV0IGluYm94ID0gW107XG4gICAgbGV0IHByb2plY3RzID0gW107XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpbmJveFwiLCBKU09OLnN0cmluZ2lmeShpbmJveCkpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcbiAgfSBlbHNlIGNvbnNvbGUubG9nKFwiQ29udGVudCBmb3VuZC5cIik7XG59XG5cbi8vIExvYWRzIGluYm94IGRhdGEgZnJvbSBsb2NhbCBzdG9yYWdlLlxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRJbmJveEZyb21TdG9yYWdlKCkge1xuICBsZXQgaW5ib3hGcm9tTG9jYWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImluYm94XCIpO1xuICBpbmJveEZyb21Mb2NhbCA9IEpTT04ucGFyc2UoaW5ib3hGcm9tTG9jYWwpO1xuICBsZXQgaW5ib3ggPSBuZXcgSW5ib3goKTtcbiAgZm9yIChsZXQgdG9kb0Zyb21Mb2NhbCBvZiBpbmJveEZyb21Mb2NhbCkge1xuICAgIGxldCB0aXRsZSA9IHRvZG9Gcm9tTG9jYWwudGl0bGU7XG4gICAgbGV0IGRlc2NyaXB0aW9uID0gdG9kb0Zyb21Mb2NhbC5kZXNjcmlwdGlvbjtcbiAgICBsZXQgdG9kbyA9IG5ldyBTaW1wbGVUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbik7XG4gICAgaW5ib3guYWRkVG9kbyh0b2RvKTtcbiAgfVxuICByZXR1cm4gaW5ib3g7XG59XG5cbi8vIExvYWRzIHByb2plY3RzIGZyb20gbG9jYWwgc3RvcmFnZVxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRQcm9qZWN0c0Zyb21TdG9yYWdlKCkge1xuICBsZXQgcHJvamVjdHNGcm9tTG9jYWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RzXCIpO1xuICBwcm9qZWN0c0Zyb21Mb2NhbCA9IEpTT04ucGFyc2UocHJvamVjdHNGcm9tTG9jYWwpO1xuICBsZXQgcHJvamVjdHMgPSBuZXcgUHJvamVjdHMoKTtcbiAgaWYgKHByb2plY3RzRnJvbUxvY2FsLmxlbmd0aCA9PSAwKSByZXR1cm4gcHJvamVjdHM7XG4gIGZvciAobGV0IHByb2plY3RGcm9tTG9jYWwgb2YgcHJvamVjdHNGcm9tTG9jYWwpIHtcbiAgICBsZXQgdGl0bGUgPSBwcm9qZWN0RnJvbUxvY2FsW1widGl0bGVcIl07XG4gICAgbGV0IHRvZG9zID0gcHJvamVjdEZyb21Mb2NhbFtcInRvZG9zXCJdO1xuICAgIGxldCBwcm9qZWN0ID0gbmV3IFByb2plY3QodGl0bGUpO1xuICAgIGZvciAobGV0IHRvZG8gb2YgdG9kb3MpIHtcbiAgICAgIGxldCB0b2RvVGl0bGUgPSB0b2RvW1widGl0bGVcIl07XG4gICAgICBsZXQgdG9kb0Rlc2NyaXB0aW9uID0gdG9kb1tcImRlc2NyaXB0aW9uXCJdO1xuICAgICAgbGV0IHRvZG9EdWUgPSB0b2RvW1wiZHVlXCJdO1xuICAgICAgbGV0IHRvZG9Qcmlvcml0eSA9IHRvZG9bXCJwcmlvcml0eVwiXTtcbiAgICAgIGxldCBwcm9qZWN0VG9kbyA9IG5ldyBUb2RvKFxuICAgICAgICB0b2RvVGl0bGUsXG4gICAgICAgIHRvZG9EZXNjcmlwdGlvbixcbiAgICAgICAgdG9kb0R1ZSxcbiAgICAgICAgdG9kb1ByaW9yaXR5XG4gICAgICApO1xuICAgICAgcHJvamVjdC5hZGRUb2RvKHByb2plY3RUb2RvKTtcbiAgICB9XG4gICAgcHJvamVjdHMuYWRkUHJvamVjdChwcm9qZWN0KTtcbiAgfVxuICByZXR1cm4gcHJvamVjdHM7XG59XG5cbi8vIFVwZGF0ZXMgc3RvcmFnZSBpbiBicm93c2VyIHRvIHJlZmxlY3QgYWRkZWQgaXRlbS5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVJbmJveFN0b3JhZ2UoaW5ib3gpIHtcbiAgbG9jYWxTdG9yYWdlW1wiaW5ib3hcIl0gPSBpbmJveC5zdHJpbmdpZnkoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVByb2plY3RzU3RvcmFnZShwcm9qZWN0cykge1xuICBsb2NhbFN0b3JhZ2VbXCJwcm9qZWN0c1wiXSA9IHByb2plY3RzLnN0cmluZ2lmeSgpO1xufVxuIiwiaW1wb3J0IHsgdXBkYXRlSW5ib3hTdG9yYWdlLCB1cGRhdGVQcm9qZWN0c1N0b3JhZ2UgfSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5pbXBvcnQgeyBTaW1wbGVUb2RvLCBUb2RvIH0gZnJvbSBcIi4vdG9kb1wiO1xuaW1wb3J0IHsgY3JlYXRlUHJvamVjdEZvcm0gfSBmcm9tIFwiLi9mb3JtXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFJlbW92ZSBsaXN0IGJ1dHRvbiBldmVudCBsaXN0ZW5lclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVBhcmVudChlKSB7XG4gIGxldCBwYXJlbnQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICBwYXJlbnQucmVtb3ZlKCk7XG59XG5cbi8vIFJlbXZvZXMgY2hpbGRyZW4gZnJvbSBtYWluXG4vLyBSZW1vdmVzIGZvcm0gSUYgcHJlc2VudFxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKCkge1xuICBsZXQgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdFwiKTtcbiAgd2hpbGUgKGxpc3QuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgbGlzdC5yZW1vdmVDaGlsZChsaXN0LmZpcnN0Q2hpbGQpO1xuICB9XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luYm94LWZvcm1cIikpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luYm94LWZvcm1cIikucmVtb3ZlKCk7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0LWZvcm1cIikpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3QtZm9ybVwiKS5yZW1vdmUoKTtcbiAgfVxufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ2xlYXJzIGxpc3QgaW4gbmF2LlxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuRnJvbU5hdigpIHtcbiAgbGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RzLWxpc3RcIik7XG4gIHdoaWxlIChsaXN0LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgIGxpc3QucmVtb3ZlQ2hpbGQobGlzdC5maXJzdENoaWxkKTtcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQb3B1bGF0ZXMgaW5ib3hcbmV4cG9ydCBmdW5jdGlvbiBwb3B1bGF0ZUluYm94KGluYm94LCBsaXN0KSB7XG4gIGZvciAobGV0IHRvZG8gb2YgaW5ib3guaW5ib3gpIHtcbiAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbGkuc2V0QXR0cmlidXRlKFwiZGF0YVwiLCB0b2RvLnRpdGxlKTtcblxuICAgIGxldCB0b2RvVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdG9kb1RleHQudGV4dENvbnRlbnQgPSBgJHt0b2RvLnRpdGxlfSAke3RvZG8uZGVzY3JpcHRpb259YDtcblxuICAgIGxldCBjaGVja2JveCA9IGNyZWF0ZUNoZWNrYm94Rm9ySW5ib3goaW5ib3gpO1xuXG4gICAgLy8gQWRkIGVsZW1lbnRzIHRvIGxpLlxuICAgIGxpLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICBsaS5hcHBlbmRDaGlsZCh0b2RvVGV4dCk7XG4gICAgbGlzdC5hcHBlbmRDaGlsZChsaSk7XG4gIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUG9wdWxhdGVzIHByb2plY3RzXG5leHBvcnQgZnVuY3Rpb24gcG9wdWxhdGVNYWluKHByb2plY3RzLCBwcm9qZWN0KSB7XG4gIGxldCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0XCIpO1xuICBsZXQgdG9kb3MgPSBwcm9qZWN0LnByb2plY3RbXCJ0b2Rvc1wiXTtcbiAgZm9yIChsZXQgdG9kbyBvZiB0b2Rvcykge1xuICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBsaS5zZXRBdHRyaWJ1dGUoXCJkYXRhXCIsIHRvZG8udGl0bGUpO1xuXG4gICAgbGV0IHRvZG9UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0b2RvVGV4dC50ZXh0Q29udGVudCA9IGAke3RvZG8udGl0bGV9ICR7dG9kby5kZXNjcmlwdGlvbn0gJHt0b2RvLmR1ZX0gJHt0b2RvLnByaW9yaXR5fWA7XG5cbiAgICAvLyBUT0RPOiBDcmVhdGUgY2hlY2tib3hcbiAgICBsZXQgY2hlY2tib3ggPSBjcmVhdGVDaGVja2JveEZvclByb2plY3QocHJvamVjdHMsIHByb2plY3QpO1xuXG4gICAgLy8gQWRkIGVsZW1kZW50cyB0byBsaS5cbiAgICBsaS5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgbGkuYXBwZW5kQ2hpbGQodG9kb1RleHQpO1xuICAgIGxpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICB9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFBvcHVsYXRlcyBwcm9qZWN0cyB0aXRsZSBvbiBuYXZcbmV4cG9ydCBmdW5jdGlvbiBwb3B1bGF0ZVByb2plY3RzKHByb2plY3RzLCBsaXN0KSB7XG4gIGZvciAobGV0IHByb2plY3Qgb2YgcHJvamVjdHMucHJvamVjdHMpIHtcbiAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbGkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luYm94LWZvcm1cIikpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbmJveC1mb3JtXCIpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgcmVtb3ZlQ2hpbGRyZW4oKTtcbiAgICAgIHBvcHVsYXRlTWFpbihwcm9qZWN0cywgcHJvamVjdCk7XG4gICAgICBjcmVhdGVQcm9qZWN0Rm9ybShwcm9qZWN0LCBwcm9qZWN0cyk7XG4gICAgfSk7XG5cbiAgICBsZXQgcHJvamVjdFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2plY3RUZXh0LnRleHRDb250ZW50ID0gYCR7cHJvamVjdC5wcm9qZWN0VGl0bGV9YDtcblxuICAgIGxpLmFwcGVuZENoaWxkKHByb2plY3RUZXh0KTtcbiAgICBsaXN0LmFwcGVuZENoaWxkKGxpKTtcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDcmVhdGUgYW5kIGFkZCBhIHRvZG8gZm9yIGluYm94LlxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVG9kbyhpbmJveCwgbGlzdCkge1xuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpO1xuICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gIGxpLnNldEF0dHJpYnV0ZShcImRhdGFcIiwgdGl0bGUudmFsdWUpO1xuXG4gIGxldCB0b2RvVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRvZG9UZXh0LnRleHRDb250ZW50ID0gYCR7dGl0bGUudmFsdWV9ICR7ZGVzY3JpcHRpb24udmFsdWV9YDtcblxuICAvLyBDaGVja2JveCBmb3IgcmVtb3ZpbmcgbGlzdCBpdGVtLlxuICBsZXQgY2hlY2tib3ggPSBjcmVhdGVDaGVja2JveEZvckluYm94KGluYm94KTtcblxuICBsaS5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gIGxpLmFwcGVuZENoaWxkKHRvZG9UZXh0KTtcbiAgbGlzdC5hcHBlbmRDaGlsZChsaSk7XG5cbiAgbGV0IHRvZG8gPSBuZXcgU2ltcGxlVG9kbyh0aXRsZS52YWx1ZSwgZGVzY3JpcHRpb24udmFsdWUpO1xuICBpbmJveC5hZGRUb2RvKHRvZG8pO1xuXG4gIHVwZGF0ZUluYm94U3RvcmFnZShpbmJveCk7IC8vIFVwZGF0ZXMgbG9jYWwgc3RvcmFnZVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDcmVhdGUgYW5kIGFkZCBhIHRvZG8gZm9yIHByb2plY3QuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2RvUHJvamVjdChwcm9qZWN0LCBwcm9qZWN0cywgbGlzdCkge1xuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpO1xuICBsZXQgZHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkdWVcIik7XG4gIGxldCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIik7XG5cbiAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICBsaS5zZXRBdHRyaWJ1dGUoXCJkYXRhXCIsIHRpdGxlLnZhbHVlKTtcblxuICAvLyBUT0RPOiBBZGQgY2hlY2tib3ggZm9yIHJlbW92YWxcbiAgbGV0IGNoZWNrYm94ID0gY3JlYXRlQ2hlY2tib3hGb3JQcm9qZWN0KHByb2plY3RzLCBwcm9qZWN0KTtcblxuICBsZXQgdG9kb1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0b2RvVGV4dC50ZXh0Q29udGVudCA9IGAke3RpdGxlLnZhbHVlfSAke2Rlc2NyaXB0aW9uLnZhbHVlfSAke2R1ZS52YWx1ZX0gJHtwcmlvcml0eS52YWx1ZX1gO1xuXG4gIGxpLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgbGkuYXBwZW5kQ2hpbGQodG9kb1RleHQpO1xuICBsaXN0LmFwcGVuZENoaWxkKGxpKTtcblxuICBsZXQgdG9kbyA9IG5ldyBUb2RvKFxuICAgIHRpdGxlLnZhbHVlLFxuICAgIGRlc2NyaXB0aW9uLnZhbHVlLFxuICAgIGR1ZS52YWx1ZSxcbiAgICBwcmlvcml0eS52YWx1ZVxuICApO1xuXG4gIHByb2plY3QuYWRkVG9kbyh0b2RvKTtcbiAgdXBkYXRlUHJvamVjdHNTdG9yYWdlKHByb2plY3RzKTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ3JlYXRlcyBjaGVja2JveC5cbmZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94Rm9ySW5ib3goaW5ib3gpIHtcbiAgbGV0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XG4gIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGUpID0+IHtcbiAgICBpbmJveC5yZW1vdmVUb2RvKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YVwiKSk7XG4gICAgcmVtb3ZlUGFyZW50KGUpO1xuICAgIHVwZGF0ZUluYm94U3RvcmFnZShpbmJveCk7XG4gIH0pO1xuICByZXR1cm4gY2hlY2tib3g7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94Rm9yUHJvamVjdChwcm9qZWN0cywgcHJvamVjdCkge1xuICBsZXQgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIGNoZWNrYm94LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZSkgPT4ge1xuICAgIHByb2plY3QucmVtb3ZlVG9kbyhlLnRhcmdldC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGFcIikpO1xuICAgIHJlbW92ZVBhcmVudChlKTtcbiAgICB1cGRhdGVQcm9qZWN0c1N0b3JhZ2UocHJvamVjdHMpO1xuICB9KTtcbiAgcmV0dXJuIGNoZWNrYm94O1xufVxuIiwiaW1wb3J0IHsgZ2VuZXJhdGVUb2RvLCBnZW5lcmF0ZVRvZG9Qcm9qZWN0IH0gZnJvbSBcIi4vaGVscGVyRnVuY3Rpb25zXCI7XG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdFwiO1xuaW1wb3J0IHsgcmVtb3ZlQ2hpbGRyZW5Gcm9tTmF2LCBwb3B1bGF0ZVByb2plY3RzIH0gZnJvbSBcIi4vaGVscGVyRnVuY3Rpb25zXCI7XG5pbXBvcnQgeyB1cGRhdGVQcm9qZWN0c1N0b3JhZ2UgfSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDcmVhdGVzIGluYm94IGZvcm1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbmJveEZvcm0oaW5ib3gsIGxpc3QpIHtcbiAgbGV0IGZvcm1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBmb3JtRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiaW5ib3gtZm9ybVwiKTtcblxuICBsZXQgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgdGl0bGVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgdGl0bGVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInRpdGxlXCIpO1xuICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiVGl0bGVcIik7XG5cbiAgbGV0IGRlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIGRlc2NyaXB0aW9uSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gIGRlc2NyaXB0aW9uSW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkZXNjcmlwdGlvblwiKTtcbiAgZGVzY3JpcHRpb25JbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcIkRlc2NyaXB0aW9uXCIpO1xuXG4gIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBidXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWRkLXRvZG8tYnV0dG9uXCIpO1xuICBidXR0b24udGV4dENvbnRlbnQgPSBcIkFkZFwiO1xuXG4gIC8vIEFkZCBpdGVtIHdoZW4gY2xpY2tpbmcgYWRkIGJ1dHRvbi5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZ2VuZXJhdGVUb2RvKGluYm94LCBsaXN0KTtcblxuICAgIC8vIENsZWFyIGZvcm0gaW5wdXRcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpLnZhbHVlID0gXCJcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpLnZhbHVlID0gXCJcIjtcbiAgfSk7XG5cbiAgZm9ybURpdi5hcHBlbmRDaGlsZCh0aXRsZUlucHV0KTtcbiAgZm9ybURpdi5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbklucHV0KTtcbiAgZm9ybURpdi5hcHBlbmRDaGlsZChidXR0b24pO1xuXG4gIGxpc3QucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChmb3JtRGl2KTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENyZWF0ZXMgcHJvamVjdCB0b2RvIGZvcm1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0Rm9ybShwcm9qZWN0LCBwcm9qZWN0cykge1xuICBsZXQgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdFwiKTtcbiAgbGV0IGZvcm1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBmb3JtRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdC1mb3JtXCIpO1xuXG4gIGxldCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICB0aXRsZUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwidGl0bGVcIik7XG4gIHRpdGxlSW5wdXQuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJUaXRsZVwiKTtcblxuICBsZXQgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgZGVzY3JpcHRpb25JbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgZGVzY3JpcHRpb25JbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImRlc2NyaXB0aW9uXCIpO1xuICBkZXNjcmlwdGlvbklucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiRGVzY3JpcHRpb25cIik7XG5cbiAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgbGV0IHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xuICBsZXQgbW9udGggPSAodG9kYXkuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICBsZXQgZGF5ID0gdG9kYXkuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXG4gIGxldCBmb3JtYXR0ZWREYXRlID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcblxuICBsZXQgZHVlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIGR1ZUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZHVlXCIpO1xuICBkdWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgZHVlSW5wdXQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgZm9ybWF0dGVkRGF0ZSk7XG5cbiAgbGV0IHByaW9yaXR5U2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgcHJpb3JpdHlTZWxlY3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcmlvcml0eVwiKTtcbiAgbGV0IHZhbHVlcyA9IFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl07XG4gIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB2YWx1ZSk7XG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgcHJpb3JpdHlTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgfVxuXG4gIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBidXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWRkLXRvZG8tYnV0dG9uXCIpO1xuICBidXR0b24udGV4dENvbnRlbnQgPSBcIkFkZFwiO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBnZW5lcmF0ZVRvZG9Qcm9qZWN0KHByb2plY3QsIHByb2plY3RzLCBsaXN0KTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpLnZhbHVlID0gXCJcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpLnZhbHVlID0gXCJcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2R1ZVwiKS52YWx1ZSA9IGZvcm1hdHRlZERhdGU7XG4gIH0pO1xuXG4gIGZvcm1EaXYuYXBwZW5kQ2hpbGQodGl0bGVJbnB1dCk7XG4gIGZvcm1EaXYuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25JbnB1dCk7XG4gIGZvcm1EaXYuYXBwZW5kQ2hpbGQoZHVlSW5wdXQpO1xuICBmb3JtRGl2LmFwcGVuZENoaWxkKHByaW9yaXR5U2VsZWN0KTtcbiAgZm9ybURpdi5hcHBlbmRDaGlsZChidXR0b24pO1xuXG4gIGxpc3QucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChmb3JtRGl2KTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENyZWF0ZXMgcHJvamVjdCBuYW1lIGZvcm1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0TmFtZUZvcm0ocHJvamVjdHMsIGxpc3QpIHtcbiAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGxldCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgbGV0IGFkZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdC1uYW1lLWNvbnRhaW5lclwiKTtcblxuICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0LW5hbWVcIik7XG4gIGlucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiUHJvamVjdCBuYW1lXCIpO1xuXG4gIGFkZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImFkZC1wcm9qZWN0LWJ1dHRvblwiKTtcbiAgYWRkLnRleHRDb250ZW50ID0gXCJBZGRcIjtcblxuICAvLyBFdmVudCBsaXN0ZW5lciBmb3IgYWRkaW5nIHByb2plY3QgYWZ0ZXIgdHlwaW5nIG5hbWVcbiAgYWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJvamVjdHMuYWRkUHJvamVjdChuZXcgUHJvamVjdChpbnB1dC52YWx1ZSkpO1xuXG4gICAgLy8gV2Ugd2FudCB0byByZWZsZWN0IHRoZSBhZGRlZCBwcm9qZWN0IG9uIHRoZSBsaXN0LlxuICAgIHJlbW92ZUNoaWxkcmVuRnJvbU5hdihsaXN0KTtcbiAgICBwb3B1bGF0ZVByb2plY3RzKHByb2plY3RzLCBsaXN0KTtcblxuICAgIHVwZGF0ZVByb2plY3RzU3RvcmFnZShwcm9qZWN0cyk7XG4gIH0pO1xuXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhZGQpO1xuICBsaXN0LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG59XG4iLCJpbXBvcnQge1xuICBjaGVja1N0b3JhZ2UsXG4gIGxvYWRJbmJveEZyb21TdG9yYWdlLFxuICBsb2FkUHJvamVjdHNGcm9tU3RvcmFnZSxcbn0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuaW1wb3J0IHsgY3JlYXRlSW5ib3hGb3JtLCBjcmVhdGVQcm9qZWN0TmFtZUZvcm0gfSBmcm9tIFwiLi9mb3JtXCI7XG5pbXBvcnQge1xuICByZW1vdmVDaGlsZHJlbixcbiAgcmVtb3ZlQ2hpbGRyZW5Gcm9tTmF2LFxuICBwb3B1bGF0ZUluYm94LFxuICBwb3B1bGF0ZVByb2plY3RzLFxufSBmcm9tIFwiLi9oZWxwZXJGdW5jdGlvbnNcIjtcbmltcG9ydCB7IGNsZWFyTG9jYWxTdG9yYWdlIH0gZnJvbSBcIi4vdGVzdFwiO1xuXG5sZXQgaW5ib3g7XG5sZXQgcHJvamVjdHM7XG5cbi8vIEluYm94IGJ1dHRvbiBldmVudCBsaXN0ZW5lciBzdHVmZi5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW5ib3hcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpc3RcIik7XG4gIHJlbW92ZUNoaWxkcmVuKCk7IC8vIENsZWFyIGNvbnRlbnRcbiAgcG9wdWxhdGVJbmJveChpbmJveCwgbGlzdCk7IC8vIFBvcHVsYXRlXG4gIGNyZWF0ZUluYm94Rm9ybShpbmJveCwgbGlzdCk7IC8vIENyZWF0ZSAmIGFkZCBmb3JtXG59KTtcblxuLy8gUHJvamVjdHMgYnV0dG9uIGV2ZW50IGxpc3RlbmVyIHN0dWZmLlxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0c1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBsZXQgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdHMtbGlzdFwiKTtcblxuICAvLyBBbGxvd3MgZm9yIHRvZ2dsaW5nIGZ1bmN0aW9uYWxpdHlcbiAgaWYgKGxpc3QuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgcmVtb3ZlQ2hpbGRyZW5Gcm9tTmF2KGxpc3QpO1xuICB9IGVsc2Uge1xuICAgIHJlbW92ZUNoaWxkcmVuRnJvbU5hdihsaXN0KTtcbiAgICBwb3B1bGF0ZVByb2plY3RzKHByb2plY3RzLCBsaXN0KTtcbiAgfVxuXG4gIHByb2plY3RzLnNob3dQcm9qZWN0cygpO1xufSk7XG5cbi8vIEFkZCBwcm9qZWN0IGJ1dHRvbiBldmVudCBsaXN0ZW5lciBzdHVmZi5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLXByb2plY3RcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RzLWxpc3RcIik7XG4gIHJlbW92ZUNoaWxkcmVuRnJvbU5hdigpO1xuICBwb3B1bGF0ZVByb2plY3RzKHByb2plY3RzLCBsaXN0KTtcbiAgY3JlYXRlUHJvamVjdE5hbWVGb3JtKHByb2plY3RzLCBsaXN0KTtcbn0pO1xuXG4vLyBsZXQgc2FtcGxlUHJvamVjdHMgPSBbXG4vLyAgIHtcbi8vICAgICB0aXRsZTogXCJ0aXRsZTFcIixcbi8vICAgICB0b2RvczogW1xuLy8gICAgICAgeyB0aXRsZTogXCJ0b2RvMVwiLCBkZXNjcmlwdGlvbjogXCJkZXNjMVwiLCBkdWU6IFwidG9kYXlcIiwgc2V2ZXJpdHk6IFwibG93XCIgfSxcbi8vICAgICAgIHtcbi8vICAgICAgICAgdGl0bGU6IFwidG9kbzJcIixcbi8vICAgICAgICAgZGVzY3JpcHRpb246IFwiZGVzYzJcIixcbi8vICAgICAgICAgZHVlOiBcInRvbW9ycm93XCIsXG4vLyAgICAgICAgIHNldmVyaXR5OiBcIm1lZGl1bVwiLFxuLy8gICAgICAgfSxcbi8vICAgICBdLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgdGl0bGU6IFwidGl0bGUyXCIsXG4vLyAgICAgdG9kb3M6IFtcbi8vICAgICAgIHtcbi8vICAgICAgICAgdGl0bGU6IFwidG9kbzVcIixcbi8vICAgICAgICAgZGVzY3JpcHRpb246IFwiZGVzYzVcIixcbi8vICAgICAgICAgZHVlOiBcInllc3RlcmRheVwiLFxuLy8gICAgICAgICBzZXZlcml0eTogXCJoaWdoXCIsXG4vLyAgICAgICB9LFxuLy8gICAgIF0sXG4vLyAgIH0sXG4vLyAgIHsgdGl0bGU6IFwidGl0bGUzXCIsIHRvZG9zOiBbXSB9LFxuLy8gXTtcbi8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoc2FtcGxlUHJvamVjdHMpKTtcblxuLy8gY2xlYXJMb2NhbFN0b3JhZ2UoKTtcbmNoZWNrU3RvcmFnZSgpO1xuaW5ib3ggPSBsb2FkSW5ib3hGcm9tU3RvcmFnZSgpO1xuLy8gaW5ib3guc2hvd0luYm94KCk7XG5cbnByb2plY3RzID0gbG9hZFByb2plY3RzRnJvbVN0b3JhZ2UoKTtcbi8vIHByb2plY3RzLnNob3dQcm9qZWN0cygpO1xuIl0sIm5hbWVzIjpbIkluYm94IiwiYWRkVG9kbyIsInRvZG8iLCJ0aGlzIiwicHVzaCIsImluYm94IiwicmVtb3ZlVG9kbyIsInRpdGxlIiwiaW5kZXgiLCJpIiwibGVuZ3RoIiwic3BsaWNlIiwic3RyaW5naWZ5IiwiZ2V0VG9kbyIsIkpTT04iLCJzaG93SW5ib3giLCJzaG93VG9kbyIsIlRvZG8iLCJjb25zdHJ1Y3RvciIsImRlc2NyaXB0aW9uIiwiZHVlIiwicHJpb3JpdHkiLCJjb25zb2xlIiwibG9nIiwiU2ltcGxlVG9kbyIsIlByb2plY3RzIiwicHJvamVjdHMiLCJhZGRQcm9qZWN0IiwicHJvamVjdCIsInJlbW92ZVByb2plY3QiLCJzaG93UHJvamVjdHMiLCJzaG93UHJvamVjdCIsIlByb2plY3QiLCJwcm9qZWN0VGl0bGUiLCJ1cGRhdGVJbmJveFN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJ1cGRhdGVQcm9qZWN0c1N0b3JhZ2UiLCJyZW1vdmVQYXJlbnQiLCJlIiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsInJlbW92ZSIsInJlbW92ZUNoaWxkcmVuIiwibGlzdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZHJlbkZyb21OYXYiLCJwb3B1bGF0ZU1haW4iLCJ0b2RvcyIsImxpIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInRvZG9UZXh0IiwidGV4dENvbnRlbnQiLCJjaGVja2JveCIsImNyZWF0ZUNoZWNrYm94Rm9yUHJvamVjdCIsImFwcGVuZENoaWxkIiwicG9wdWxhdGVQcm9qZWN0cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjcmVhdGVQcm9qZWN0Rm9ybSIsInByb2plY3RUZXh0IiwiY3JlYXRlQ2hlY2tib3hGb3JJbmJveCIsImdldEF0dHJpYnV0ZSIsImZvcm1EaXYiLCJ0aXRsZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsInRvZGF5IiwiRGF0ZSIsImZvcm1hdHRlZERhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImdldERhdGUiLCJkdWVJbnB1dCIsInByaW9yaXR5U2VsZWN0IiwidmFsdWVzIiwidmFsdWUiLCJvcHRpb24iLCJidXR0b24iLCJnZW5lcmF0ZVRvZG9Qcm9qZWN0IiwicGFyZW50Tm9kZSIsInBvcHVsYXRlSW5ib3giLCJnZW5lcmF0ZVRvZG8iLCJjcmVhdGVJbmJveEZvcm0iLCJjb250YWluZXIiLCJpbnB1dCIsImFkZCIsImNyZWF0ZVByb2plY3ROYW1lRm9ybSIsInNldEl0ZW0iLCJjaGVja1N0b3JhZ2UiLCJpbmJveEZyb21Mb2NhbCIsImdldEl0ZW0iLCJwYXJzZSIsInRvZG9Gcm9tTG9jYWwiLCJsb2FkSW5ib3hGcm9tU3RvcmFnZSIsInByb2plY3RzRnJvbUxvY2FsIiwicHJvamVjdEZyb21Mb2NhbCIsInRvZG9UaXRsZSIsInRvZG9EZXNjcmlwdGlvbiIsInRvZG9EdWUiLCJ0b2RvUHJpb3JpdHkiLCJwcm9qZWN0VG9kbyIsImxvYWRQcm9qZWN0c0Zyb21TdG9yYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==